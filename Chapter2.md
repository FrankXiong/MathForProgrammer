# 2D 向量绘图

你也许对二维或三维的概念已经有一些直观认识。二维（2D）对象就像一页纸或者电脑屏幕上的图片，是扁平的。它只有宽度和高度两个维度。然而，物理世界中的三维（3D）对象，不仅有宽度和高度，还有深度。

2D 和 3D 实体模型在编程中非常重要。手机、平板电脑或者 PC 上呈现的所有东西都是 2D 对象，都具有一定像素的宽和高。任何呈现物理世界的仿真、游戏或者动画都被存储为 3D 数据，并最终被投影到二维的屏幕上。VR 和 AR 应用中，3D 模型必须和真实的测量过的，跟用户的位置和视角相关的 3D 数据匹配。

尽管我们每天都生活在三维空间中，从更高维度来看待一些数据也是大有裨益。物理学上通常把时间看作是第四维。当一个物体存在于三维空间的某个位置时，一个事件发生在一个特定的时间点。数据科学问题中，数据集通常拥有更多维度。例如，网站跟踪一个用户可以有数百个可测量的属性，这些属性描述了用户使用习惯。要解决这些图形学、物理学和数据分析上的问题，需要一个处理数据高维数据的框架。这个框架就是向量数学。

向量就是多维空间中的物体。它们有自己的算法概念（加法、乘法等）。我们首先从易于可视化和计算的 2D 向量开始学习。本书中使用了大量的 2D 向量，在推理高维问题时，我们也将它们用于心智模型。

## 2.1 2D 向量绘图

2D 世界就像一页纸或者电脑屏幕一样扁平。数学语言中，平的 2D 空间被称为平面。2D 平面中的物体有宽度和高度两个维度，但没有深度这第三个维度。同样地，你可以通过两部分信息来描述 2D 中的位置：垂直位置和水平位置。为了描述点在平面中的位置，你需要一个参考点。我们称这个特殊的点为原点。图 2.1 展示了这个关系。

![Figure 2.1 Locating one of several points in the plane, relative to the origin](./img/2.1.png)

有很多点可以选择，但我们必须固定其中一个作为原点。为便于区分，我们用一个 x 来标记原点，而不是图 2.1中的一个点。从原点开始，可以画一个箭头（如图 2.1 中那条实线）来表示和另一点的相对位置。

二维向量是平面上相对于原点的一个点。相当于，你可以把一个向量想象成平面上的一个直线箭头；任何箭头都可以放在原点开头，表示某个特定的点（图 2.2）。

![Figure 2.2 Superimposing an arrow on the plane indicates a point relative to the origin.](./img/2.2.png)

从这章开始，我们将用箭头和点来表示向量。点很有用，因为我们可以用它们画出更多有趣的图。如果我将图 2.2 中的点和图 2.3 中连接起来，会得到一个恐龙图：

![Figure 2.3 Connecting points in the plane to draw a shape](./img/2.3.png)

任何时候，计算机呈现的 2D 或 3D 图形，从我的简陋的恐龙到皮克斯动画长片，都是由点或者连接的向量来显示所需的形状。要创建想要的图形，就必须选择正确位置的向量，这需要精确的测量。一起来看看如何测量平面中的向量。

### 2.1.1 2D 向量表示

可以使用直尺测量一维，比如对象长度。要测量二维，我们需要两把直尺。这些直尺就是所谓的”坐标轴“（axes，单数是axis），把它们放在垂直于彼此的平面上，在原点相交。用坐标轴绘制的图 2.4 的恐龙图有了上下左右的概念。横轴被称为 x 轴，纵轴被称为 y 轴。

![Figure 2.4 The dinosaur drawn with an x-axis and a y-axis.](./img/2.4.png)

有了坐标轴来确定方向，我们可以说，”有四个点在原点的右上方“。但我们想要更多量化的数据。同样地，2D 图形中，可以添加垂直于轴线的网格线，显示点相对于它们的位置。按惯例，我们把原点放在 x 轴和 y 轴上的刻度 0 处（图 2.5）。

在这个网格线的上下文下，我们可以测量平面中的向量。举个例子，图 2.5 中，恐龙尾巴尖的x轴值为 +6，y轴值为 +4。可以认为这些距离是厘米、英寸、像素或者其他任何长度单位，但通常我们不会使用单位，除非是在特定应用下。

![Figure 2.5 Grid lines let us measure the location of points relative to the axes.](./img/2.5.png)

数字 6 和 4 被称为点的 x 和 y 坐标，这足以告诉我们在讨论的是哪个点。我们一般将坐标写成一个[x, y]的有序数对（或者叫元组），比如（6, 4）。图 2.6 显示了现在如何以三种形式描述同一向量。

![Figure 2.6 Three mental models describing the same vector.](./img/2.6.png)

通过另一些坐标，比如（-3, 4.5），我们可以发现平面中的表示它们的点或者箭头。要用这个坐标到达平面上的对应点，从原点开始，然后向左移动三条网格线（因为 x 坐标是 -3），然后向上移动四条半网格线（y 坐标是 4.5）。这个点不会在两个网格线的交点上，但没关系；任何实数组成的坐标点都指定了平面中的某个点。相应的箭头将是从原点到该位置的直线路径，该位置向上并指向左侧（也可以指向西北方）。尝试自己画一画这个例子来练习一下！


### 2.1.2 Python 2D 绘图

当你在屏幕上生成图像时，你是在 2D 空间中工作的。屏幕上的像素是那个平面上的可用点。它们由整数坐标标记，而不是实数坐标，而且像素间没有空隙。也就是说，大多数图形库允许使用浮点坐标，并将图形自动处理转换为屏幕上的像素。

我们有大量的语言和库可供选择，来详细说明图形，并将它们显示在屏幕上：OpenGL，CSS，SVG，等等。Python 有 Pillow 和 Turtle 这样的库，这些库非常适合用矢量数据绘图。在本章中，我使用一小部分自定义函数来绘图，这些函数是建立在另一个名叫 Matplotlib 的 Python 库之上的。这让我们专注于使用 Python 构建带有矢量数据的图像。一旦你理解了这个过程，你就可以很容易地学会任何其他的库。

这里涉及的最重要的函数称为 draw，它接受代表几何的对象作为输入，keyword 参数指定你所绘图的外观。表 2.1中列出的 Python 类表示各种可绘制的几何对象。

*表 2.1 一些表示几何图形的 Python 类，可用于 draw 函数*

Class | Constructor example | Description
---- | ----  | ---- 
| Polygon  | Polygon(*vectors) | Draws a polygon whose vertices (corners) are rep- resented by a list of vectors |
| Points  | Points(*vectors) | Represents a list of points (dots) to draw, one at each of the input vectors |

你可以从源代码中的 vector_drawing.py 文件找到这些函数的实现。在这章的结尾，我会讲一点他们的具体实现。

> 注意：对于本章节（和随后的每个章节），源代码文件夹里有一个 Jupyter 手册 ，演示如何（按序）运行本章的所有代码，包括从 vector_drawing 模块中引入的函数。如果你还没准备好，可以查阅附录 A，来配置 Python 和Jupyter。

有了这些绘图函数，我们可以绘制出恐龙轮廓的所有点（图 2.5）：

```python
from vector_drawing import *
     dino_vectors = [(6,4), (3,1), (1,2), (–1,5), (–2,5), (–3,4), (–4,4),
     # insert 16 remaining vectors here
]
draw(
    Points(*dino_vectors)
)

```

我没有写出完整的 dino_vectors 列表，但通过正确的 vector 集合，代码会提供出图 2.7 所示的点（也与图 2.5相匹配）。

![Figure 2.7 Plotting the dinosaur’s points with the draw function in Python](./img/2.7.png)

作为我们绘画过程中的下一步，我们可以把一些点连接起来。第一段可能连接点（6,4）与恐龙尾巴上的点（3,1）。我们可以调用这个函数，在这个新线段中绘制点，图 2.8 显示了结果：

```python
draw(
    Points(*dino_vectors),
    Segment((6,4),(3,1))
)
```

![Figure 2.8 The dinosaur’s points with a line segment connecting the first two points (6, 4) and (3, 1)](./img/2.8.png)

这个线段实际上是由点（6,4）和点（3,1）以及位于它们之间的直线上的所有点组成的集合。draw 函数自动将这些点上的所有像素染成蓝色。Segment 类是一个有用的抽象类，因为我们不必构建每个从几何对象（此例中的恐龙）中的点组成的段。再画 20 个线段，我们就得到了恐龙的完整轮廓（图2.9）。

![Figure 2.9 A total of 21 function calls give us 21 line segments, completing the outline of the dinosaur.](./img/2.9.png)

原则上，只要我们有所有指定的矢量，我们现在就可以勾勒出任何我们想要的二维形状。手工计算所有的坐标是很乏味的，所以我们将开始研究如何用矢量计算来自动找到它们的坐标。
